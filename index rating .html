<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Session Feedback</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: #f3f4f6;
      color: #111827;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card {
      width: 100%;
      max-width: 520px;
      background: #ffffff;
      border-radius: 18px;
      padding: 22px 24px 20px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.18);
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .avatar {
      width: 44px;
      height: 44px;
      border-radius: 999px;
      background: linear-gradient(135deg, #22c55e, #0ea5e9);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #022c22;
      font-weight: 700;
      font-size: 20px;
    }

    .card-header h1 {
      margin: 0;
      font-size: 18px;
    }

    .card-header span {
      font-size: 12px;
      color: #6b7280;
    }

    .subtitle {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 16px;
    }

    /* Star rating */
    .rating-group {
      margin-bottom: 14px;
    }

    .rating-label {
      font-size: 13px;
      margin-bottom: 6px;
    }

    .stars {
      display: inline-flex;
      flex-direction: row-reverse;
      font-size: 26px;
      cursor: pointer;
    }

    .stars input {
      display: none;
    }

    .stars label {
      color: #d1d5db;
      padding: 0 2px;
      transition: transform 0.06s, color 0.12s;
    }

    .stars label:hover,
    .stars label:hover ~ label {
      color: #facc15;
      transform: translateY(-1px);
    }

    .stars input:checked ~ label {
      color: #fbbf24;
    }

    .rating-text {
      font-size: 12px;
      color: #6b7280;
      margin-top: 4px;
      min-height: 16px;
    }

    /* Tags */
    .tag-group {
      margin-bottom: 14px;
    }

    .tag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .tag {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      font-size: 12px;
      cursor: pointer;
    }

    .tag.active {
      background: #111827;
      color: #f9fafb;
      border-color: #111827;
    }

    /* Textarea */
    .form-group {
      margin-bottom: 14px;
    }

    textarea {
      width: 100%;
      min-height: 90px;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      font-size: 13px;
      resize: vertical;
      outline: none;
    }

    textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.15);
    }

    .row-inline {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 6px;
    }

    .row-inline label {
      display: flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
    }

    .actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 4px;
    }

    .btn-outline,
    .btn-primary {
      padding: 8px 14px;
      border-radius: 999px;
      font-size: 13px;
      border: 1px solid transparent;
      cursor: pointer;
    }

    .btn-outline {
      border-color: #d1d5db;
      background: #ffffff;
      color: #374151;
    }

    .btn-outline:hover {
      background: #f3f4f6;
    }

    .btn-primary {
      background: #2563eb;
      color: #ffffff;
      border-color: #1d4ed8;
      font-weight: 600;
    }

    .btn-primary:disabled {
      background: #9ca3af;
      border-color: #9ca3af;
      cursor: not-allowed;
    }

    .success-msg {
      margin-top: 10px;
      font-size: 13px;
      color: #16a34a;
      display: none;
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="card-header">
      <div class="avatar">S</div>
      <div>
        <h1>Rate your session</h1>
        <span>Energy science Doubt‑Clearing with Mr. Sandeep Tyagi · 20 Dec 2025</span>
      </div>
    </div>

    <p class="subtitle">
      Your feedback helps improve future sessions for you and other students. You can keep it anonymous if you want.
    </p>

    <form id="feedbackForm">
      <!-- Star rating -->
      <div class="rating-group">
        <div class="rating-label">Overall rating</div>
        <div class="stars">
          <input type="radio" name="rating" id="star5" value="5" />
          <label for="star5" title="Excellent">★</label>

          <input type="radio" name="rating" id="star4" value="4" />
          <label for="star4" title="Good">★</label>

          <input type="radio" name="rating" id="star3" value="3" />
          <label for="star3" title="Okay">★</label>

          <input type="radio" name="rating" id="star2" value="2" />
          <label for="star2" title="Poor">★</label>

          <input type="radio" name="rating" id="star1" value="1" />
          <label for="star1" title="Very poor">★</label>
        </div>
        <div class="rating-text" id="ratingText"></div>
      </div>

      <!-- Quick tags -->
      <div class="tag-group">
        <div class="rating-label">What went well?</div>
        <div class="tag-list" id="tagList">
          <button type="button" class="tag">Clear explanations</button>
          <button type="button" class="tag">Solved my doubts</button>
          <button type="button" class="tag">Friendly teacher</button>
          <button type="button" class="tag">Good pace</button>
          <button type="button" class="tag">Interactive session</button>
        </div>
      </div>

      <!-- Comment -->
      <div class="form-group">
        <div class="rating-label">Tell us more (optional)</div>
        <textarea
          id="comment"
          placeholder="Share specific examples, suggestions, or anything else you want the teacher to know…"
        ></textarea>
      </div>

      <!-- Anonymous + submit -->
      <div class="row-inline">
        <label>
          <input type="checkbox" id="anonymous" />
          Submit anonymously
        </label>
        <span id="charCount">0 / 300</span>
      </div>

      <div class="actions">
        <button type="button" class="btn-outline" id="skipBtn">Skip</button>
        <button type="submit" class="btn-primary" id="submitBtn" disabled>
          Submit feedback
        </button>
      </div>

      <div class="success-msg" id="successMsg">
        ✅ Thank you for your feedback. It has been recorded.
      </div>
    </form>
  </div>

  <script>
    const feedbackForm = document.getElementById("feedbackForm");
    const ratingInputs = document.querySelectorAll("input[name='rating']");
    const ratingText = document.getElementById("ratingText");
    const commentEl = document.getElementById("comment");
    const charCount = document.getElementById("charCount");
    const submitBtn = document.getElementById("submitBtn");
    const successMsg = document.getElementById("successMsg");
    const tagList = document.getElementById("tagList");
    const skipBtn = document.getElementById("skipBtn");

    const ratingMessages = {
      1: "Very poor – the session did not meet expectations.",
      2: "Poor – there were several issues.",
      3: "Okay – some parts were helpful.",
      4: "Good – the session was helpful overall.",
      5: "Excellent – very helpful and engaging!"
    };

    function updateSubmitState() {
      const hasRating = Array.from(ratingInputs).some((i) => i.checked);
      const hasComment = commentEl.value.trim().length > 0;
      const hasTags = tagList.querySelector(".tag.active") !== null;

      // Enable submit if at least rating is given (and optionally tags/comment)
      submitBtn.disabled = !hasRating && !hasComment && !hasTags;
    }

    ratingInputs.forEach((input) => {
      input.addEventListener("change", () => {
        ratingText.textContent = ratingMessages[input.value] || "";
        updateSubmitState();
      });
    });

    // Tags toggle
    tagList.addEventListener("click", (e) => {
      if (e.target.classList.contains("tag")) {
        e.target.classList.toggle("active");
        updateSubmitState();
      }
    });

    // Character counter
    commentEl.addEventListener("input", () => {
      const max = 300;
      if (commentEl.value.length > max) {
        commentEl.value = commentEl.value.slice(0, max);
      }
      charCount.textContent = `${commentEl.value.length} / ${max}`;
      updateSubmitState();
    });

    feedbackForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const rating = Array.from(ratingInputs).find((i) => i.checked)?.value || null;
      const tags = Array.from(tagList.querySelectorAll(".tag.active")).map(
        (t) => t.textContent
      );
      const data = {
        rating,
        tags,
        comment: commentEl.value.trim(),
        anonymous: document.getElementById("anonymous").checked
      };

      console.log("Feedback submitted:", data); // replace with real API call

      successMsg.style.display = "block";
      submitBtn.disabled = true;

      // Optionally redirect after a short delay
      // setTimeout(() => window.location.href = "session-history.html", 1500);
    });

    skipBtn.addEventListener("click", () => {
      const ok = confirm("Skip feedback and go back?");
      if (ok) {
        // Example: redirect to history or home
        window.location.href = "session-history.html";
      }
    });
  </script>
</body>
</html>
